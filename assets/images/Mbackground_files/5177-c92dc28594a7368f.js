!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b615fe9a-ae75-4df8-b910-594fa71f7e8e",e._sentryDebugIdIdentifier="sentry-dbid-b615fe9a-ae75-4df8-b910-594fa71f7e8e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5177],{64979:function(e,t,r){r.d(t,{$m:function(){return R},C0:function(){return y},EQ:function(){return d},F4:function(){return N},H$:function(){return v},IS:function(){return x},Iu:function(){return _},Kq:function(){return f},Nc:function(){return h},OI:function(){return c},PF:function(){return n},RJ:function(){return z},S3:function(){return l},Vj:function(){return g},W$:function(){return I},YT:function(){return u},Zq:function(){return E},Zv:function(){return b},_R:function(){return C},cm:function(){return o},e5:function(){return s},f3:function(){return w},os:function(){return i},p3:function(){return a},u4:function(){return k},vl:function(){return O},wK:function(){return m},wj:function(){return D},wy:function(){return p},xQ:function(){return T}}),r(12976).p;let o="download_after_removing_bg",n="copy_after_removing_bg",a="edit_after_removing_bg",i="ai_tool_removebg",l="ai_tool_expand",u="ai_tool_expand_after_download",c="ai_tool_expand_carousel",_="ai_tool_expand_removebg",s="ai_tool_expand_download_popover",d="ai_tool_retouch",f="ai_tool_retouch_download_popover",p="ai_tool_retouch_after_download",g="ai_tool_reimagine",m="ai_tool_reimagine_download_popover",w="ai_tool_reimagine_after_download",v="ai_tool_upscaler",b="ai_tool_replacebg",y="ai_tool_all",k="ai_tool_all_thumbnail",h="ai_tool_adjust",I="ai_tool_video",x="ai_tool_generate_style_ref",N="ai_tool_generate_prompt",R="ai_tool_assistant",z="edit_tools_onboarding_v2",O="edit_tools_onboarding",T=["replacebg","video","generatePrompt","styleReference"],E=["tint","grain","presets"],C=2e3,D=15},53387:function(e,t,r){r.d(t,{i:function(){return v}});var o=r(41937),n=r(65122),a=r(20176),i=r(90312),l=r(85229),u=r(52983),c=r(65724),_=r(64979),s=r(11645),d=r(2394),f=r(18444),p=r(8147);let g=e=>w()(e),m={removebg:"freepik-tools-integration-remove-bg",retouch:"pikaso-edition",expand:"pikaso-edition",reimagine:"pikaso-reimagine",replacebg:"pikaso-bg-replacer",video:"pikaso-video-kling",generatePrompt:"pikaso-tti",styleReference:"pikaso-tti",assistant:"pikaso-edition"},w=()=>{let e=(0,p.H)(),t=(0,o.I)(),r=(0,f.w)(),n=(0,d.E)(),a=(0,s.u)(),i=null==e?void 0:e.permissions;return(0,u.useCallback)(e=>{let o=m[e];if(n)return!o||a(o);if(!i)return!1;let{canUseIA:l}=i,u=l&&!t,c=u&&!r;return({replacebg:u&&c,retouch:u,removebg:u,expand:u,reimagine:u,adjust:!t,video:u&&c,generatePrompt:u&&c,styleReference:u&&c,assistant:u,workflow:u})[e]},[n,i,t,r,a])},v=e=>{let{tool:t,subOption:r,resourceData:_,checkoutQueryParams:s}=e,d=(0,o.I)(),f=g(t),p=(0,n.e)(),{setLoginCookies:m,signUpUrl:w}=(0,i.e)(),v=(0,c.W)(_.id),y=(null==_?void 0:_.premium)||!1,k=p||!y,{isUserWinback:h,showWinbackModal:I}=(0,l.l)(),{showDeviceBlockedModal:x,isDeviceBlocked:N}=(0,a.q)();return(0,u.useCallback)(()=>N?(x(),!0):h?(I(),!0):(!k||!f)&&(d&&k&&!b(t,r)?(m(),window.location.href=w):v({resourceData:{name:null==_?void 0:_.name,mediaUrl:_.preview.url,mediaWidth:_.preview.width,mediaHeight:_.preview.height,resourceType:"regular"},checkoutQueryParams:s}),!0),[N,h,k,f,d,t,r,v,null==_?void 0:_.name,_.preview.url,_.preview.width,_.preview.height,s,x,I,m,w])},b=(e,t)=>_.xQ.includes(e)||t&&_.Zq.includes(t)},33843:function(e,t,r){r.d(t,{BP:function(){return _},Us:function(){return n},Zq:function(){return u},bE:function(){return i},yS:function(){return d}});let o=["pixel-art","illustration","surreal","comic","fantasy","anime","digital-art","vintage","photo","all-styles"],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.includes(e)},a=["1:1","1:2","2:1","2:3","3:4","4:5","9:16","3:2","4:3","16:9","custom"],i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.includes(e)},l=["crop","light","color","tint","grain","rotate","presets"],u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.includes(e)},c=["createSocialPost","createPoster","createFlyer","mixImages","applyPromo"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.includes(e)},s=["remove","insert"],d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.includes(e)}},94608:function(e,t,r){r.d(t,{W:function(){return i}});var o=r(33843);let n={video:"ai_video_generator",adjust:"adjust",reimagine:"reimagine",expand:"expand",removebg:"background",retouch:"retouch",replacebg:"background",generatePrompt:"ai_image_generator",styleReference:"ai_image_generator",assistant:"assistant",workflow:"assistant"},a=(e,t)=>{if("removebg"===e)return"remove";if("replacebg"===e)return"replace";if("reimagine"===e&&(0,o.Us)(t))return"all-styles"===t?"style":"style__".concat(t);if("expand"===e&&(0,o.bE)(t))return"aspect_ratio__".concat(t);if("adjust"===e&&(0,o.Zq)(t)||"retouch"===e&&(0,o.yS)(t))return t;if("generatePrompt"===e)return"prompt__image_reference";if("styleReference"===e)return"style__image_reference";if("workflow"===e&&(0,o.BP)(t)){if("createSocialPost"===t)return"workflow__create_post";if("createPoster"===t)return"workflow__create_poster";if("createFlyer"===t)return"workflow__create_flyer";if("mixImages"===t)return"workflow__mix_images";if("applyPromo"===t)return"workflow__apply_promo";throw Error("Invalid subOption: ".concat(t))}return"ai_gen"},i=(e,t)=>({tool:n[e],eventName:a(e,t),businessLine:"ai_tools,content"})},52753:function(e,t,r){r.d(t,{d:function(){return o}});let o=(e,t,r)=>"resource_detail".concat(e?"":"_free","_").concat(null!=t?t:"ai_tools").concat(r?"_".concat(r):"")},15715:function(e,t,r){r.d(t,{H:function(){return n}});let o=e=>{let{resource:t,file:r,option:o,size:n,action:a,walletId:i,locale:l,modifier:u}=e,c=new URLSearchParams;return c.set("resource","".concat(t)),r&&o?(c.set("file",r),c.set("option","".concat(o))):n&&c.set("size","".concat(n)),a&&c.set("action",a),i&&c.set("walletId",i),c.set("locale",l),u&&c.set("modifier",u),c.toString()},n=async e=>{let t=o(e),r=await fetch("/api/regular/download?".concat(t));return r.ok?{success:!0,data:await r.json()}:429===r.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===r.status||403===r.status||405===r.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===r.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},75045:function(e,t,r){r.d(t,{i:function(){return C}});var o=r(59445),n=r(15880),a=r(68147),i=r(85229),l=r(87420),u=r(59608),c=r(52983),_=r(9036),s=r(35576),d=r(7526);let f=(e,t)=>t||("photo"===e?"jpg":"zip");var p=r(49737);r(97458);let g=(0,c.createContext)(null),m=()=>(0,c.useContext)(g)||{shouldTrackingLog:!0};var w=r(15715),v=r(32509),b=r(59916),y=r(72118),k=r(1850),h=r(64979),I=r(56879);let x=k.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit","ai_video",h.cm,h.PF,h.p3,h.Kq,h.wK,h.os,h.H$,h.C0,h.u4,h.OI,h.Iu,h.e5,"ai_tool_retouch","ai_tool_retouch_after_download","ai_tool_expand","ai_tool_expand_after_download","ai_tool_reimagine","ai_tool_reimagine_after_download","ai_tool_adjust","ai_tool_adjust_after_download","ai_tool_replacebg","ai_tool_video","ai_tool_video_after_download","ai_tool_assistant","ai_tool_generate_prompt","ai_tool_generate_style_ref"]),N=k.z.enum(["workflow_create_post","workflow_create_poster","workflow_mix_images","workflow_apply_promo","workflow_create_flyer","workflow_create_logo_variations","workflow_localize","workflow_create_logo","workflow_apply_colors","workflow_replace_text","workflow_remove_text"]);k.z.object({resource:k.z.coerce.number(),file:I.ru.optional(),option:k.z.coerce.number().optional(),size:k.z.coerce.number().optional(),action:x.optional(),modifier:N.optional(),walletId:k.z.string().nullable().optional(),locale:k.z.string()}),k.z.object({data:k.z.object({filename:k.z.string(),url:k.z.string(),prompt:k.z.string().optional(),signed_url:k.z.string().optional()})}).transform(e=>{let{data:t}=e;return t}).transform(e=>{let{signed_url:t,...r}=e;return{...r,signedUrl:t}});let R=k.z.array(k.z.string()),z=new Date(new Date().getTime()+48e4),O=y.Z.withConverter({write:e=>e}),T=e=>{try{let t=O.get(e);if(!t)return[];return R.parse(JSON.parse(t))}catch(e){return[]}},E=()=>{let e=(0,a.I)(),t=(0,b.b)();return(0,c.useCallback)(r=>{if(!e)return;let o="".concat("ck_items_").concat(e),n=T(o),a="".concat(r);if(!n.includes(a)){let e=JSON.stringify([...n,a]);O.set(o,e,{path:"/",domain:t,expires:z})}},[e,t])},C=e=>{let{resource:t,file:r,action:g="download",modifier:b,location:y="resource_detail",option:k,size:h,showAttributionModal:I=!0,handleError:x,checkoutQueryParams:N,skipDownloadTracker:R=!1}=e,{id:z,name:O,author:T,premium:C,regularType:D,isAIGenerated:P,url:j}=t,[U,H]=(0,c.useState)(!1),{isUserWinback:S,showWinbackModal:W}=(0,i.l)(),{showAttribution:A}=(0,p.tc)(),L=E(),q=(0,v.b)({resource:t,location:y}),F=(0,s.mS)(),{shouldTrackingLog:K}=m(),{showDeviceBlockedModal:Z,isDeviceBlocked:$}=(0,n.qx)(),J=(0,o.Lh)(),Q=(0,a.I)(),B=(0,l.ZK)(),G=(0,_.TH)({file_extension:f(D,r),file_name:O,file_id:z,license:C?"premium":"free",resolution:h?d.w8[h]:"original",style:"na",author_name:T.name,category:P?"ai_image":D,action:"prompt"===g?"view_prompt":g,location:y,url_link:j}),M=(0,c.useCallback)(e=>{if(x){x(e);return}"prompt"!==g&&q(e,N)},[x,g,q,N]);return{handleDownload:(0,c.useCallback)(async(e,t)=>{if($){Z();return}if(S){W();return}H(!0),J||u.uT("WARNING: User ".concat(Q," has no wallet_id"),"warning"),K&&!R&&F({resourceId:z,isResourcePremium:C,resourceType:D,downloadType:g,fileType:D,variant:y});let o=await (0,w.H)({resource:z,size:h?2e3:void 0,action:g,modifier:b,file:r,option:k,walletId:J,locale:B});if(o.success)return I&&A&&A(),H(!1),L(z),G({externalUrl:null!=e?e:j,setting:t}),o.data;M(o),H(!1)},[$,S,J,K,R,z,h,g,b,r,k,B,M,Z,W,Q,F,C,D,y,I,A,L,G,j]),isDownloading:U}}},32509:function(e,t,r){r.d(t,{b:function(){return l}});var o=r(17842),n=r(10893),a=r(52983),i=r(65724);let l=e=>{var t;let{location:r,resource:l}=null!=e?e:{},{t:u}=(0,n.$G)("error"),{openToast:c}=(0,o.x_)(),_=(0,i.W)(null!==(t=null==l?void 0:l.id)&&void 0!==t?t:0,"",r);return(0,a.useCallback)((e,t)=>{if("DOWNLOAD_LIMIT_REACHED"===e.data&&l){_({resourceData:{name:l.name,mediaUrl:l.preview.url,mediaWidth:l.preview.width,mediaHeight:l.preview.height,resourceType:"regular"},checkoutQueryParams:t,modalType:"downloadLimit",origin:"download_limit"});return}if("AUTHENTICATION_ERROR"===e.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===e.data&&c({type:"danger",message:u("notFound")}),"UNKNOWN_ERROR"===e.data&&c({type:"danger",message:u("unknown")})},[_,c,l,u])}},64237:function(e,t,r){r.d(t,{y:function(){return n}});var o=r(5704);let n=e=>{let{isEditableInMockup:t,isEditableInWepik:r}=e,n=(0,o.Jn)("type");return"illustration"===n?"illustration":t||"mockup"===n?"mockup":r||"template"===n?"template":void 0}}}]);