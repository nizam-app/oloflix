!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f817c040-9846-4d12-a86a-7f06c437d7c4",e._sentryDebugIdIdentifier="sentry-dbid-f817c040-9846-4d12-a86a-7f06c437d7c4")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5451],{1557:function(e,t,r){r.d(t,{U:function(){return n}});let n=(0,r(52983).createContext)({})},79187:function(e,t,r){r.d(t,{u:function(){return k}});var n=r(97458),i=r(52983),a=r(23113),o=r(27793),l=r(91394),c=r(17842),s=r(45451);let u=()=>(0,i.useCallback)(e=>{let{collectionId:t,collectionName:r,fileId:n,location:i}=e;(0,s.sendGTMEvent)({collection_id:t,collection_name:r,event_name:"add_to_collection",event:"ga4event",file_id:n,location:i})},[]),d=()=>(0,i.useCallback)(e=>{let{location:t,fileId:r}=e;(0,s.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:r})},[]);var h=r(49504),f=r(63202);let v=async e=>{let{id:t,collectionId:r,resourceType:n}=e,i=new URLSearchParams;return i.append("collectionId",r.toString()),i.set("resourceType",n),await (0,f.c)("/api/user/resources/".concat(t,"/collections?").concat(i.toString()),"DELETE")},m=async e=>{let{id:t,collectionId:r,resourceType:n}=e;return await (0,f.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:r,resourceType:n})};var p=r(58058),g=r.n(p),w=r(10893);let y=()=>{let{t:e}=(0,w.$G)("detailCommon");return(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2 text-sm text-surface-foreground-1",children:[(0,n.jsx)("span",{className:"whitespace-nowrap text-sm font-semibold text-surface-foreground-1",children:e("savedSuccessfully")}),(0,n.jsx)(g(),{href:"/user/collections",legacyBehavior:!0,children:(0,n.jsx)("span",{className:"cursor-pointer whitespace-nowrap text-xs font-normal !text-surface-foreground-accent-0",children:e("seeMyCollections")})})]})},x=e=>{let{type:t,id:r,location:s}=e,[f,p]=(0,i.useState)(!1),[g,w]=(0,i.useState)(!1),x=(0,h.gx)(),{openToast:b}=(0,c.x_)(),j=u(),C=(0,a.a)("smMax"),S=(0,l.d)(),{loginUrl:_,setLoginCookies:I}=(0,o.J)(),k=d(),R=(0,i.useCallback)(async(e,i)=>{try{p(!0),await m({id:r,collectionId:e,resourceType:t}),j({fileId:r,collectionId:e,collectionName:i,location:s}),b({message:(0,n.jsx)(y,{}),showIcon:!1,showCloseButton:!1,position:C?"bottom-center":"top-right"}),x()}catch(e){console.error(e),b()}finally{p(!1),C&&w(!1)}},[r,t,j,s,b,C,x,w]);return{isOpen:g,loading:f,setIsOpen:w,handleAddToCollection:R,handleRemoveFromCollection:(0,i.useCallback)(async e=>{try{p(!0),await v({id:r,collectionId:e,resourceType:t}),x()}catch(e){console.error(e),b()}finally{p(!1)}},[r,x,b,t]),onButtonOpenClick:()=>{if(!S){I(),window.location.href=_;return}x(),w(!0),k({location:s,fileId:r})},handleOpenChange:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(e)}}};var b=r(7616),j=r(94498),C=r(99);let S=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,b.Dv)(j.HQ);return{collections:e,nextPage:t}},_=()=>{let{collections:e,nextPage:t}=S(),[r,n]=(0,i.useState)([]),a=(0,b.b9)(j.GD),o=(0,i.useRef)();(0,i.useEffect)(()=>{(null==e?void 0:e.length)>0&&n(e.map(C.V))},[e,t]);let l=null!==t,c=t=>{n((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(C.V))},s=async e=>{o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{a(e)},350)};return{isSearchByApi:l,searchCollections:r,handleSearch:e=>{l?s(e):c(e)}}};var I=r(1557);let k=e=>{let{children:t,id:r,type:a,location:o}=e,{handleAddToCollection:l,handleRemoveFromCollection:c,loading:s,isOpen:u,setIsOpen:d,onButtonOpenClick:h,handleOpenChange:f}=x({type:a,id:r,location:o}),{searchCollections:v,isSearchByApi:m,handleSearch:p}=_(),g=(0,i.useMemo)(()=>({id:r,type:a,loading:s,isOpen:u,searchCollections:v,isSearchByApi:m,setIsOpen:d,handleSearch:p,handleAddToCollection:l,handleRemoveFromCollection:c,onButtonOpenClick:h,handleOpenChange:f}),[l,c,p,r,u,m,s,v,d,h,f,a]);return(0,n.jsx)(I.U.Provider,{value:g,children:t})}},88659:function(e,t,r){r.d(t,{r:function(){return a}});var n=r(52983),i=r(1557);let a=()=>(0,n.useContext)(i.U)},99:function(e,t,r){r.d(t,{V:function(){return n}});let n=e=>{var t,r;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection,preview:null===(r=e.previews[0])||void 0===r?void 0:r.url}}},65376:function(e,t,r){r.d(t,{F:function(){return S}});var n=r(97458),i=r(97813),a=r(57291),o=r(98821),l=r.n(o),c=r(52983),s=r(70870),u=r(20339),d=r(58750),h=r(45591),f=r(5479),v=r(91050),m=r(32490),p=r(97797),g=r(93295),w=r(3797),y=r(29708),x=r(37908);let b=e=>{let{id:t,poster:r,videoSrc:i,premium:a,quality:o,duration:b,name:C,author:S,orientation:_,related:I=!1,nativeAspectRatio:k,url:R,track:E,uuid:G,location:N,position:T,enableGaTracker:D=!1,isAIGenerated:L,itemSubtype:P}=e,[V,A]=(0,c.useState)(!1),q=(0,c.useRef)(null),M=(0,m.R)({containerRef:q,threshold:[0,1]}),O=(0,f.l)({id:t,url:R,related:I,nativeAspectRatio:k,track:E,uuid:G}),z=(0,d.o)(r,{...t&&{item_id:t.toString()}}),U=(0,v.Ft)(),F=(0,h.oL)(),{height:H}=(0,s.n)(q);return(0,n.jsx)(u.l,{thumbnailHeight:null!=H?H:0,children:(0,n.jsx)("div",{className:j({orientation:null!=_?_:"horizontal"}),ref:q,children:(0,n.jsxs)("article",{className:"relative size-full","data-cy":"resource-thumbnail",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[(0,n.jsx)(w.A,{as:O,onHandleClick:e=>{e.shiftKey||e.ctrlKey||e.altKey||F(t,U,"video")},name:C,children:(0,n.jsxs)("figure",{className:"relative size-full bg-surface-0",children:[(0,n.jsx)(l(),{className:"relative bottom-0 size-full rounded-xl object-cover",src:z,width:"horizontal"===_?640:360,height:"vertical"===_?640:360,alt:C,priority:M}),(0,n.jsx)(y.n,{posterSrc:z,videoSrc:i,duration:b,name:C,author:S,isInViewport:M,id:t,premium:a,position:T,enableGaTracker:D,videoUrl:O,isHovered:V,orientation:_})]})}),(0,n.jsx)(p.Y,{id:t,name:C,poster:r,authorName:null==S?void 0:S.name,isPremium:a,isAIGenerated:L,orientation:_}),V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.v,{id:t,name:C,poster:r,containerRef:q,orientation:_}),M&&(0,n.jsx)(g.Q,{id:t,poster:r,location:N,author:S,premium:a,quality:o,orientation:_,name:C,itemSubtype:P})]})]})})})},j=(0,a.j)(["relative grow-[calc(var(--ratio)*100)] basis-[calc(var(--ratio)*var(--row-height))] [--ratio:calc(var(--width)/var(--height))]"],{variants:{orientation:{vertical:"[--height:640] [--width:360]",horizontal:"[--height:360] [--width:640]",square:"[--height:360] [--width:360]"}}}),C=e=>void 0!==e.id,S=e=>{let{items:t,fromView:r,page:a,uuid:o}=e,l=t.filter(C),c=l.every(e=>"vertical"===(0,i.X)(e.previews[0].aspectRatio));return(0,n.jsx)(v.Ch,{videos:l,fromView:r,page:a,uuid:o,children:(0,n.jsx)("div",{className:_({isOnlyVertical:c}),children:t.map((e,t)=>(0,n.jsx)(b,{id:e.id,poster:e.poster,videoSrc:e.videoSrc,premium:e.premium,quality:e.quality,duration:e.duration,name:e.name,author:e.author,position:t,url:e.url,availableAspectRatios:e.availableAspectRatios,nativeAspectRatio:e.nativeAspectRatio,orientation:e.nativeOrientation,uuid:o,location:"thumbnail",enableGaTracker:!0,isAIGenerated:e.isAIGenerated,itemSubtype:e.itemSubtype},e.id))})})},_=(0,a.j)(["relative flex flex-wrap justify-center gap-6",'after:grow-[1000000] after:content-[""]',"[--height-grid:1] [--ratio-grid:calc(var(--width-grid)/var(--height-grid))] [--width-grid:2]","after:basis-[calc(var(--ratio-grid)*var(--row-height))]"],{variants:{isOnlyVertical:{true:"[--row-height:400]",false:["[--row-height:300px]","md:[--row-height:200px]"]}},defaultVariants:{isOnlyVertical:!1}})},80719:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(63202);let i=e=>{let{page:t,resourceId:r,searchTerm:i,collectionIds:a,ownership:o}=e,l=a?a.join(","):void 0,c={page:"".concat(t),...r&&{resourceId:"".concat(r)},...i&&{"filter[term]":i},...l&&{"filter[ids]":l},...o&&{"filter[ownership]":o}},s="/api/user/collections?".concat(new URLSearchParams(c));return(0,n.c)(s,"GET")}},49504:function(e,t,r){r.d(t,{gx:function(){return f},lL:function(){return h}});var n=r(59077),i=r(78511),a=r(25288),o=r(7616),l=r(52983),c=r(80719),s=r(94498);let u=["collections","all"],d=e=>{let{page:t,searchTerm:r,resourceId:i}=e;return(0,n.C)({queryKey:[...u,{page:t,resourceId:i,searchTerm:r}],queryFn:async()=>{let{data:e,success:n}=await (0,c.X)({page:t,resourceId:i,searchTerm:r});if(!n)throw Error(e);return e}})},h=e=>{let{page:t=1,resourceId:r}=e,n=(0,o.Dv)(s.GD);return(0,i.a)(d({page:t,searchTerm:n,resourceId:null!=r?r:null}))},f=()=>{let e=(0,a.NL)();return(0,l.useCallback)(()=>{e.invalidateQueries({queryKey:u})},[e])}},94498:function(e,t,r){r.d(t,{GD:function(){return i},HQ:function(){return a},w0:function(){return o}});var n=r(24399);let i=(0,r(73139).rw)(null),a=(0,n.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),o=(0,n.cn)([])},59077:function(e,t,r){r.d(t,{C:function(){return n}});function n(e){return e}}}]);